; color:navy; cursor:pointer; }\r\n         @media screen and (max-width: 639px) {\r\n          pre { width: 440px; overflow: auto; white-space: pre-wrap; word-wrap: break-word; }\r\n         }\r\n         @media screen and (max-width: 479px) {\r\n          pre { width: 280px; }\r\n         }\r\n        </style>\r\n    </head>\r\n\r\n    <body bgcolor=\"white\">\r\n\r\n            <span><H1>Server Error in '/' Application.<hr width=100% size=1 color=silver></H1>\r\n\r\n            <h2> <i>Runtime Error</i> </h2></span>\r\n\r\n            <font face=\"Arial, Helvetica, Geneva, SunSans-Regular, sans-serif \">\r\n\r\n            <b> Description: </b>An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine.\r\n            <br><br>\r\n\r\n            <b>Details:</b> To enable the details of this specific error message to be viewable on remote machines, please create a &lt;customErrors&gt; tag within a &quot;web.config&quot; configuration file located in the root directory of the current web application. This &lt;customErrors&gt; tag should then have its &quot;mode&quot; attribute set to &quot;Off&quot;.<br><br>\r\n\r\n            
<table width=100% bgcolor=\"#ffffcc\">\r\n               <tr>\r\n                  <td>\r\n                      <code><pre>\r\n\r\n&lt;!-- Web.Config Configuration File --&gt;\r\n\r\n&lt;configuration&gt;\r\n    &lt;system.web&gt;\r\n        &lt;customErrors mode=&quot;Off&quot;/&gt;\r\n    &lt;/system.web&gt;\r\n&lt;/configuration&gt;</pre>                      </code>\r\n\r\n                  </td>\r\n               </tr>\r\n            </table>\r\n\r\n            <br>\r\n\r\n            <b>Notes:</b> The current error page you are seeing can be replaced by a custom error page by modifying the &quot;defaultRedirect&quot; attribute of the application&#39;s &lt;customErrors&gt; configuration tag to point to a custom error page URL.<br><br>\r\n\r\n            <table width=100% bgcolor=\"#ffffcc\">\r\n               <tr>\r\n                  <td>\r\n                      <code><pre>\r\n\r\n&lt;!-- Web.Config Configuration File --&gt;\r\n\r\n&lt;configuration&gt;\r\n    &lt;system.web&gt;\r\n        &lt;customErrors mode=&quot;RemoteOnly&quot; defaultRedirect=&quot;mycustompage.htm&quot;/&gt;\r\n    &lt;/system.web&gt;\r\n&lt;/configuration&gt;</pre>                      </code>\r\n\r\n                  </td>\r\n               </tr>\r\n            </table>\r\n\r\n            <br>\r\n\r\n            </font>\r\n\r\n    </body>\r\n</html>\r\n"}
{"level":50,"time":1748967362946,"pid":14472,"hostname":"vme1dessftvm02","context":"application insights","msg":"Application Insights is not initialized. Cannot track exception."}
[Nest] 14472  - 06/03/2025, 11:16:06 AM     LOG [ProveedorController] [INICIO buscarProveedores] X-Correlation-Id: 1, X-Request-Id: 1
[Nest] 14472  - 06/03/2025, 11:16:06 AM     LOG [ProveedorController] Aplicación: 1, Proceso: 1, Usuario: 11
[Nest] 14472  - 06/03/2025, 11:16:06 AM     LOG [ProveedorController] Criterios de búsqueda: {"pageSize":20,"pageStartIndex":0,"estado":"V"}
[Nest] 14472  - 06/03/2025, 11:16:06 AM     LOG [ProveedorSearchService] [INICIO searchProveedores] Filtros: {"pageSize":20,"pageStartIndex":0,"estado":"V"}
[Nest] 14472  - 06/03/2025, 11:16:06 AM     LOG [ProveedorSearchService] Query generada: SELECT "p"."idProveedor" AS "p_idProveedor", "p"."idPersona" AS "p_idPersona", "p"."idTipoProveedor" AS "p_idTipoProveedor", "p"."codigoProveedor" AS "p_codigoProveedor", "p"."tipoProveedor" AS "p_tipoProveedor", "p"."indicadorCertificacion" AS "p_indicadorCertificacion", "p"."indicadorRedSelecta" AS "p_indicadorRedSelecta", "p"."estadoRegistro" AS "p_estadoRegistro", "p"."codigoUsuarioCreador" AS "p_codigoUsuarioCreador", "p"."fechaCreacion" AS "p_fechaCreacion", "p"."codigoUsuarioModificador" AS "p_codigoUsuarioModificador", "p"."fechaModificacion" AS "p_fechaModificacion", "persona"."IdPersona" AS "persona_IdPersona", "persona"."TipoPersona" AS "persona_TipoPersona", "persona"."NombreCompletoPersona" AS "persona_NombreCompletoPersona", "persona"."NombreAbreviadoPersona" AS "persona_NombreAbreviadoPersona", "persona"."CodigoTipoDocumento" AS "persona_CodigoTipoDocumento", "persona"."NumeroDocumento" AS "persona_NumeroDocumento", "persona"."DescripcionPaginaWeb" AS "persona_DescripcionPaginaWeb", "persona"."CodigoTipoTrabajador" AS "persona_CodigoTipoTrabajador", "persona"."EstadoRegistro" AS "persona_EstadoRegistro", "persona"."CodigoUsuarioCreador" AS "persona_CodigoUsuarioCreador", "persona"."FechaCreacion" AS "persona_FechaCreacion", "persona"."CodigoUsuarioModificador" AS "persona_CodigoUsuarioModificador", "persona"."FechaModificacion" AS "persona_FechaModificacion", "persona"."CodigoUsuarioCreadorSistema" AS "persona_CodigoUsuarioCreadorSistema", "persona"."FechaCreacionSistema" AS "persona_FechaCreacionSistema", "persona"."CodigoUsuarioUpdateSistema" AS "persona_CodigoUsuarioUpdateSistema", "persona"."FechaUpdateSistema" AS "persona_FechaUpdateSistema", "tipoProveedor"."IdTipoProveedor" AS "tipoProveedor_IdTipoProveedor", "tipoProveedor"."TipoProveedor" AS "tipoProveedor_TipoProveedor", "tipoProveedor"."DescripcionTipoProveedor" AS "tipoProveedor_DescripcionTipoProveedor", "tipoProveedor"."EstadoRegistro" AS "tipoProveedor_EstadoRegistro", "tipoProveedor"."CodigoUsuarioCreador" AS "tipoProveedor_CodigoUsuarioCreador", "tipoProveedor"."FechaCreacion" AS "tipoProveedor_FechaCreacion", "tipoProveedor"."CodigoUsuarioModificador" AS "tipoProveedor_CodigoUsuarioModificador", "tipoProveedor"."FechaModificacion" AS "tipoProveedor_FechaModificacion", "tipoProveedor"."CodigoUsuarioCreadorSistema" AS "tipoProveedor_CodigoUsuarioCreadorSistema", "tipoProveedor"."FechaCreacionSistema" AS "tipoProveedor_FechaCreacionSistema", "tipoProveedor"."CodigoUsuarioUpdateSistema" AS "tipoProveedor_CodigoUsuarioUpdateSistema", "tipoProveedor"."FechaUpdateSistema" AS "tipoProveedor_FechaUpdateSistema" FROM "persona"."Mae_Proveedor" "p" LEFT JOIN "persona"."Mae_Persona" "persona" ON "persona"."IdPersona"="p"."idPersona"  LEFT JOIN "persona"."Tip_TipoProveedor" "tipoProveedor" ON "tipoProveedor"."IdTipoProveedor"="p"."idTipoProveedor" WHERE "p"."estadoRegistro" = @0
query: SELECT COUNT(DISTINCT("p"."idProveedor")) AS "cnt" FROM "persona"."Mae_Proveedor" "p" LEFT JOIN "persona"."Mae_Persona" "persona" ON "persona"."IdPersona"="p"."idPersona"  LEFT JOIN "persona"."Tip_TipoProveedor" "tipoProveedor" ON "tipoProveedor"."IdTipoProveedor"="p"."idTipoProveedor" WHERE "p"."estadoRegistro" = @0 -- PARAMETERS: [null]
[Nest] 14472  - 06/03/2025, 11:16:07 AM     LOG [ProveedorSearchService] Total de elementos encontrados: 0
query: SELECT DISTINCT "distinctAlias"."p_idProveedor" AS "ids_p_idProveedor", "distinctAlias"."p_codigoProveedor" FROM (SELECT "p"."idProveedor" AS "p_idProveedor", "p"."idPersona" AS "p_idPersona", "p"."idTipoProveedor" AS "p_idTipoProveedor", "p"."codigoProveedor" AS "p_codigoProveedor", "p"."tipoProveedor" AS "p_tipoProveedor", "p"."indicadorCertificacion" AS "p_indicadorCertificacion", "p"."indicadorRedSelecta" AS "p_indicadorRedSelecta", "p"."estadoRegistro" AS "p_estadoRegistro", "p"."codigoUsuarioCreador" AS "p_codigoUsuarioCreador", "p"."fechaCreacion" AS "p_fechaCreacion", "p"."codigoUsuarioModificador" AS "p_codigoUsuarioModificador", "p"."fechaModificacion" AS "p_fechaModificacion", "persona"."IdPersona" AS "persona_IdPersona", "persona"."TipoPersona" AS "persona_TipoPersona", "persona"."NombreCompletoPersona" AS "persona_NombreCompletoPersona", "persona"."NombreAbreviadoPersona" AS "persona_NombreAbreviadoPersona", "persona"."CodigoTipoDocumento" AS "persona_CodigoTipoDocumento", "persona"."NumeroDocumento" AS "persona_NumeroDocumento", "persona"."DescripcionPaginaWeb" AS "persona_DescripcionPaginaWeb", "persona"."CodigoTipoTrabajador" AS "persona_CodigoTipoTrabajador", "persona"."EstadoRegistro" AS "persona_EstadoRegistro", "persona"."CodigoUsuarioCreador" AS "persona_CodigoUsuarioCreador", "persona"."FechaCreacion" AS "persona_FechaCreacion", "persona"."CodigoUsuarioModificador" AS "persona_CodigoUsuarioModificador", "persona"."FechaModificacion" AS "persona_FechaModificacion", "persona"."CodigoUsuarioCreadorSistema" AS "persona_CodigoUsuarioCreadorSistema", "persona"."FechaCreacionSistema" AS "persona_FechaCreacionSistema", "persona"."CodigoUsuarioUpdateSistema" AS "persona_CodigoUsuarioUpdateSistema", "persona"."FechaUpdateSistema" AS "persona_FechaUpdateSistema", "tipoProveedor"."IdTipoProveedor" AS "tipoProveedor_IdTipoProveedor", "tipoProveedor"."TipoProveedor" AS "tipoProveedor_TipoProveedor", "tipoProveedor"."DescripcionTipoProveedor" AS "tipoProveedor_DescripcionTipoProveedor", "tipoProveedor"."EstadoRegistro" AS "tipoProveedor_EstadoRegistro", "tipoProveedor"."CodigoUsuarioCreador" AS "tipoProveedor_CodigoUsuarioCreador", "tipoProveedor"."FechaCreacion" AS "tipoProveedor_FechaCreacion", "tipoProveedor"."CodigoUsuarioModificador" AS "tipoProveedor_CodigoUsuarioModificador", "tipoProveedor"."FechaModificacion" AS "tipoProveedor_FechaModificacion", "tipoProveedor"."CodigoUsuarioCreadorSistema" AS "tipoProveedor_CodigoUsuarioCreadorSistema", "tipoProveedor"."FechaCreacionSistema" AS "tipoProveedor_FechaCreacionSistema", "tipoProveedor"."CodigoUsuarioUpdateSistema" AS "tipoProveedor_CodigoUsuarioUpdateSistema", "tipoProveedor"."FechaUpdateSistema" AS "tipoProveedor_FechaUpdateSistema" FROM "persona"."Mae_Proveedor" "p" LEFT JOIN "persona"."Mae_Persona" "persona" ON "persona"."IdPersona"="p"."idPersona"  LEFT JOIN "persona"."Tip_TipoProveedor" "tipoProveedor" ON "tipoProveedor"."IdTipoProveedor"="p"."idTipoProveedor" WHERE "p"."estadoRegistro" = @0) "distinctAlias" ORDER BY "distinctAlias"."p_codigoProveedor" ASC, "p_idProveedor" ASC OFFSET 0 ROWS FETCH NEXT 20 ROWS ONLY -- PARAMETERS: [null]    
[Nest] 14472  - 06/03/2025, 11:16:07 AM     LOG [ProveedorSearchService] IDs de proveedores encontrados: 
[Nest] 14472  - 06/03/2025, 11:16:07 AM     LOG [ProveedorSearchService] Códigos de proveedores encontrados: 
[Nest] 14472  - 06/03/2025, 11:16:07 AM     LOG [ProveedorSearchService] [FIN searchProveedores] Tiempo total: 93ms, Proveedores encontrados: 0        
[Nest] 14472  - 06/03/2025, 11:16:07 AM     LOG [ProveedorController] [FIN buscarProveedores] X-Correlation-Id: 1, Tiempo total: 96ms
[Nest] 14472  - 06/03/2025, 11:16:07 AM     LOG [ProveedorController] Proveedores encontrados: 0
{"level":30,"time":1748967367090,"pid":14472,"hostname":"vme1dessftvm02","req":{"method":"POST","url":"/ms-ne-consulta-personaProveedor-eps/persona/v1.0.0/proveedor","X-Correlation-Id":"1","X-Request-Id":"1","usuarioAplicacion":"11","nombreAplicacion":"1","procesoNegocio":"1"},"res":{"statusCode":201},"responseTime":118,"msg":"request completed"}
{"level":30,"time":1748967375089,"pid":14472,"hostname":"vme1dessftvm02","req":{"method":"POST","url":"/ms-ne-consulta-personaProveedor-eps/persona/v1.0.0/proveedor","X-Correlation-Id":"1","X-Request-Id":"1","usuarioAplicacion":"11","nombreAplicacion":"1","procesoNegocio":"1"},"res":{"statusCode":400},"responseTime":6,"msg":"request completed"}


ejecuta este script:
- Verificar permisos actuales del usuario
SELECT
p.permission_name,
p.state_desc,
o.name AS object_name,
pr.name AS principal_name
FROM sys.database_permissions p
INNER JOIN sys.objects o ON p.major_id = o.object_id
INNER JOIN sys.database_principals pr ON p.grantee_principal_id = pr.principal_id
WHERE pr.name = 'spn-oficinadatosadb-desa-01'


-- =============================================
-- 1. TABLA: convenio.TIPO_CONTRATO
-- =============================================
IF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'convenio.TIPO_CONTRATO') AND type in (N'U'))
DROP TABLE convenio.TIPO_CONTRATO
GO

CREATE TABLE convenio.TIPO_CONTRATO (
TIPO_CONTRATO INT NOT NULL,
DESCRIPCION VARCHAR(100) NOT NULL,
DES_RESUMIDA VARCHAR(50),
DES_ALIAS1 VARCHAR(50),
DES_ALIAS2 VARCHAR(50),
DES_ALIAS3 VARCHAR(50),
NOT_MEMO TEXT,
CONTRATO_SEPS VARCHAR(10),
COMPANIA INT,
SISTEMA VARCHAR(10),
STATUS CHAR(1) DEFAULT 'V',
COD_USUARIO_CREADOR VARCHAR(15),
FEC_CREACION DATETIME2(3),
COD_USUARIO_UPDATE VARCHAR(15),
FEC_UPDATE DATETIME2(3),
CONSTRAINT PK_TIPO_CONTRATO PRIMARY KEY (TIPO_CONTRATO)
)
GO

-- =============================================
-- 2. TABLA: convenio.CONTRATO
-- =============================================
IF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'convenio.CONTRATO') AND type in (N'U'))
DROP TABLE convenio.CONTRATO
GO

CREATE TABLE convenio.CONTRATO (
NRO_CONTRATO INT NOT NULL,
NRO_VERSION INT NOT NULL,
COD_PROVEEDOR INT NOT NULL,
IDPROVEEDOR VARCHAR(50),
TIPO_CONTRATO INT,
IND_COBERTURA_CLIENTE CHAR(1),
STATUS_REGISTRO CHAR(1) DEFAULT 'V',
COMPANIA INT,
SISTEMA VARCHAR(10),
COD_USUARIO_CREADOR VARCHAR(15),
FEC_CREACION DATETIME2(3),
COD_USUARIO_UPDATE VARCHAR(15),
FEC_UPDATE DATETIME2(3),
CONSTRAINT PK_CONTRATO PRIMARY KEY (NRO_CONTRATO, NRO_VERSION),
CONSTRAINT FK_CONTRATO_TIPO FOREIGN KEY (TIPO_CONTRATO) REFERENCES convenio.TIPO_CONTRATO(TIPO_CONTRATO)
)
GO

-- =============================================
-- 3. TABLA: convenio.CONTRATO_VERSION
-- =============================================
IF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'convenio.CONTRATO_VERSION') AND type in (N'U'))
DROP TABLE convenio.CONTRATO_VERSION
GO

CREATE TABLE convenio.CONTRATO_VERSION (
NRO_CONTRATO INT NOT NULL,
NRO_VERSION INT NOT NULL,
FEC_INICIO_VIGENCIA DATETIME2(3),
FEC_FIN_VIGENCIA DATETIME2(3),
PLAZO_CREDITO INT,
IND_PRESENTACION_FACTURA CHAR(1),
COD_FORMA_PAGO_REEMB CHAR(1),
COD_BANCO VARCHAR(10),
TIPO_CUENTA VARCHAR(10),
COD_MONEDA_CTA VARCHAR(10),
NRO_CUENTA VARCHAR(50),
STATUS_REGISTRO CHAR(1) DEFAULT 'V',
NOT_MEMO TEXT,
COMPANIA INT,
SISTEMA VARCHAR(10),
COD_USUARIO_CREADOR VARCHAR(15),
FEC_CREACION DATETIME2(3),
COD_USUARIO_UPDATE VARCHAR(15),
FEC_UPDATE DATETIME2(3),
PLAZO_CREDITO_MED INT,
PLAZO_CREDITO_ENF INT,
CONSTRAINT PK_CONTRATO_VERSION PRIMARY KEY (NRO_CONTRATO, NRO_VERSION),
CONSTRAINT FK_CONTRATO_VERSION FOREIGN KEY (NRO_CONTRATO, NRO_VERSION) REFERENCES convenio.CONTRATO(NRO_CONTRATO, NRO_VERSION)
)
GO

-- =============================================
-- 4. TABLA: convenio.CONTRATO_VERSION_SUCURSAL
-- =============================================
IF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'convenio.CONTRATO_VERSION_SUCURSAL') AND type in (N'U'))
DROP TABLE convenio.CONTRATO_VERSION_SUCURSAL
GO

CREATE TABLE convenio.CONTRATO_VERSION_SUCURSAL (
NRO_CONTRATO INT NOT NULL,
NRO_VERSION INT NOT NULL,
COD_PROVEEDOR INT NOT NULL,
NRO_SUCURSAL_PROVEEDOR INT NOT NULL,
TIPO_MECANISMO INT,
FEC_INICIO_VIGENCIA DATETIME2(3),
FEC_FIN_VIGENCIA DATETIME2(3),
PLAZO_CREDITO INT,
COD_IPRESS VARCHAR(20),
FACTOR_TARIFARIO DECIMAL(10,2),
PROC_DSCTO_FARMACIA DECIMAL(5,2),
COD_MONEDA INT,
LIMITE_CUARTO_DIARIO DECIMAL(10,2),
STATUS_REGISTRO CHAR(1) DEFAULT 'V',
COD_USUARIO_CREADOR VARCHAR(15),
FEC_CREACION DATETIME2(3),
COD_USUARIO_UPDATE VARCHAR(15),
FEC_UPDATE DATETIME2(3),
IND_COBRAR_COASEGURO_CONS_MEDI CHAR(1),
SERVICIO_CLINICA DECIMAL(10,2),
FACTOR_HONORARIOS_MED DECIMAL(10,2),
FACTOR_SERVICIOS_AUX DECIMAL(10,2),
LIMITE_CUARTO DECIMAL(10,2),
CONSULTA_MEDICA2 DECIMAL(10,2),
CONSTRAINT PK_CONTRATO_VERSION_SUCURSAL PRIMARY KEY (NRO_CONTRATO, NRO_VERSION, COD_PROVEEDOR, NRO_SUCURSAL_PROVEEDOR),
CONSTRAINT FK_CVS_CONTRATO_VERSION FOREIGN KEY (NRO_CONTRATO, NRO_VERSION) REFERENCES convenio.CONTRATO_VERSION(NRO_CONTRATO, NRO_VERSION)
)
GO

-- =============================================
-- 5. TABLA: convenio.CONTRATO_VERSION_SUCURSAL_BENE
-- =============================================
IF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'convenio.CONTRATO_VERSION_SUCURSAL_BENE') AND type in (N'U'))
DROP TABLE convenio.CONTRATO_VERSION_SUCURSAL_BENE
GO

CREATE TABLE convenio.CONTRATO_VERSION_SUCURSAL_BENE (
NRO_CONTRATO INT NOT NULL,
NRO_VERSION INT NOT NULL,
COD_PROVEEDOR INT NOT NULL,
NRO_SUCURSAL_PROVEEDOR INT NOT NULL,
COD_BENEFICIO VARCHAR(10) NOT NULL,
COD_USUARIO_CREADOR VARCHAR(15),
FEC_CREACION DATETIME2(3),
COD_USUARIO_UPDATE VARCHAR(15),
FEC_UPDATE DATETIME2(3),
IND_DIAGNOSTICOS_INCLUIDOS CHAR(1),
COSTO_FIJO_PACIENTE_MES DECIMAL(10,2),
NRO_DIAS_ACUMULACION INT,
STATUS_REGISTRO CHAR(1) DEFAULT 'V',
IND_PROCEDIMIENTOS_INCL CHAR(1),
LIMITE_BENEFICIO_PROVEEDOR DECIMAL(12,2),
NRO_ATENCIONES_ACUMULACION INT,
IND_COBERTURA_CLIENTE CHAR(1),
TIPOPEAS CHAR(1),
NUMVER INT,
FECREGPEAS DATETIME2(3),
CONSTRAINT PK_CONTRATO_VERSION_SUCURSAL_BENE PRIMARY KEY (NRO_CONTRATO, NRO_VERSION, COD_PROVEEDOR, NRO_SUCURSAL_PROVEEDOR, COD_BENEFICIO),
CONSTRAINT FK_CVSB_CONTRATO_VERSION_SUCURSAL FOREIGN KEY (NRO_CONTRATO, NRO_VERSION, COD_PROVEEDOR, NRO_SUCURSAL_PROVEEDOR)
REFERENCES convenio.CONTRATO_VERSION_SUCURSAL(NRO_CONTRATO, NRO_VERSION, COD_PROVEEDOR, NRO_SUCURSAL_PROVEEDOR)
)
GO

-- =============================================
-- ÍNDICES ADICIONALES PARA OPTIMIZACIÓN
-- =============================================

-- Índices en CONTRATO
CREATE NONCLUSTERED INDEX IX_CONTRATO_PROVEEDOR
ON convenio.CONTRATO (COD_PROVEEDOR) INCLUDE (STATUS_REGISTRO, TIPO_CONTRATO)
GO

CREATE NONCLUSTERED INDEX IX_CONTRATO_STATUS
ON convenio.CONTRATO (STATUS_REGISTRO) INCLUDE (NRO_CONTRATO, NRO_VERSION, COD_PROVEEDOR)
GO

-- Índices en CONTRATO_VERSION_SUCURSAL
CREATE NONCLUSTERED INDEX IX_CVS_PROVEEDOR
ON convenio.CONTRATO_VERSION_SUCURSAL (COD_PROVEEDOR, NRO_SUCURSAL_PROVEEDOR)
INCLUDE (STATUS_REGISTRO, FEC_INICIO_VIGENCIA, FEC_FIN_VIGENCIA)
GO

CREATE NONCLUSTERED INDEX IX_CVS_VIGENCIA
ON convenio.CONTRATO_VERSION_SUCURSAL (FEC_INICIO_VIGENCIA, FEC_FIN_VIGENCIA)
INCLUDE (NRO_CONTRATO, COD_PROVEEDOR, STATUS_REGISTRO)
GO

-- Índices en CONTRATO_VERSION_SUCURSAL_BENE
CREATE NONCLUSTERED INDEX IX_CVSB_BENEFICIO
ON convenio.CONTRATO_VERSION_SUCURSAL_BENE (COD_BENEFICIO)
INCLUDE (STATUS_REGISTRO, IND_COBERTURA_CLIENTE)
GO

-- =============================================
-- COMENTARIOS EN TABLAS
-- =============================================
EXEC sys.sp_addextendedproperty
@name=N'MS_Description',
@value=N'Tabla maestra de tipos de contrato',
@level0type=N'SCHEMA', @level0name=N'convenio',
@level1type=N'TABLE', @level1name=N'TIPO_CONTRATO'
GO

EXEC sys.sp_addextendedproperty
@name=N'MS_Description',
@value=N'Tabla principal de contratos con proveedores',
@level0type=N'SCHEMA', @level0name=N'convenio',
@level1type=N'TABLE', @level1name=N'CONTRATO'
GO

EXEC sys.sp_addextendedproperty
@name=N'MS_Description',
@value=N'Versiones de contratos con información de vigencia y forma de pago',
@level0type=N'SCHEMA', @level0name=N'convenio',
@level1type=N'TABLE', @level1name=N'CONTRATO_VERSION'
GO

EXEC sys.sp_addextendedproperty
@name=N'MS_Description',
@value=N'Sucursales asociadas a las versiones de contratos',
@level0type=N'SCHEMA', @level0name=N'convenio',
@level1type=N'TABLE', @level1name=N'CONTRATO_VERSION_SUCURSAL'
GO

EXEC sys.sp_addextendedproperty
@name=N'MS_Description',
@value=N'Beneficios específicos por sucursal de contrato',
@level0type=N'SCHEMA', @level0name=N'convenio',
@level1type=N'TABLE', @level1name=N'CONTRATO_VERSION_SUCURSAL_BENE'
GO

PRINT 'Esquema convenio creado exitosamente con todas las tablas e índices.'